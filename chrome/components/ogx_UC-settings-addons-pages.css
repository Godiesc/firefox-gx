/* Source file made available under Mozilla Public License v. 2.0 See the main repository for updates as well as full license text.
   https://github.com/Godiesc/firefox-gx */

@media (prefers-color-scheme: dark) {
    window, dialog {

        --color-accent-primary: var(--general-color) !important;
        --in-content-page-background: #1a1a24 !important;
        --in-content-primary-button-background: var(--general-color) !important;
        --in-content-primary-button-text-color: white !important;
        --in-content-primary-button-background-hover: var(--button-active-bgcolor) !important;  /* Radiobutton background color on 'hover' */
        --in-content-primary-button-background-active: var(--general-color) !important;         /* Radiobutton background color on 'clic' with 'check' */

        --in-content-box-background: #1f1f30  !important;
        --in-content-box-border-color: #4d4d68  !important;

        --in-content-button-background: var(--in-content-box-border-color) !important;          /* Button color */
        --in-content-button-background-hover: var(--general-color) !important;                  /* Button color on 'hover' */
        --in-content-button-background-active: var(--button-hover-bgcolor) !important;          /* Button color on 'click' */
    }}

@media (prefers-color-scheme: light) {
    window, dialog {
        --color-accent-primary: var(--general-color) !important;
        --in-content-page-background: #f9f9f9 !important;
        --in-content-primary-button-background: var(--general-color) !important;
        --in-content-primary-button-text-color: white !important;
        --in-content-primary-button-background-hover: var(--button-active-bgcolor) !important;  /* Radiobutton background color on 'hover' */
        --in-content-primary-button-background-active: var(--general-color) !important;         /* Radiobutton background color on 'clic' with 'check' */

        --in-content-box-background: #bababa  !important;
        --in-content-box-border-color: #aeaeae  !important;

        --in-content-button-background: var(--in-content-box-border-color) !important;          /* Button color */
        --in-content-button-background-hover: var(--button-active-bgcolor) !important;          /* Button color on 'hover' */
        --in-content-button-background-active: var(--button-hover-bgcolor) !important;          /* Button color on 'click' */
        --in-content-button-text-color: black !important;
    }}

:root { 
    --toolbarbutton-icon-fill-attention: unset !important;                                      /* Remove unwanted accent color */
    --color-accent-primary: var(--general-color) !important;                                    /* Main Accent color */
    --color-accent-primary-hover: var(--button-hover-personal) !important;
    --color-accent-primary-active: var(--button-active-bgcolor) !important;

    --in-content-text-color: var(--contrast-color) !important;                                  /* General 'text' color */
    --in-content-page-color: var(--contrast-color) !important;                                  /* Other general 'text' color */
    --in-content-primary-button-text-color: var(--contrast-color) !important;                   /* Another general 'text' color */

    --in-content-box-background-odd: color-mix(in srgb,                                         
        var(--in-content-box-border-color), transparent) !important;
    --table-row-background-color-alternate: var(--in-content-page-background) !important;       /* Color distinction between rows in a 'table' and 'search shortcuts' */
    
    --in-content-box-info-background: var(--in-content-box-background-odd) !important;          /* Background color of the box of items that sync */
    --section-highlight-background-color: var(--in-content-box-info-background) !important;

    --in-content-border-color: var(--in-content-box-border-color) !important;                   /* Separator line in configuration */
    --in-content-table-border-color: var(--in-content-box-border-color) !important;             /* table border color */

    --background-color-box: var(--in-content-box-background) !important;                        /* Background color of tables */
    --in-content-table-background: var(--in-content-page-background) !important;                /* Background color of 'about:support' tables */

    --card-outline-color: var(--general-color) !important;                                      /* outline color in 'themes' and 'extensions' */
    --card-shadow-hover: var(--card-shadow), 0 0 0 5px var(--card-outline-color) !important;    /* outline color in 'themes' and 'extensions' on 'hover' */

    --in-content-item-hover: var(--button-hover-bgcolor) !important;                            /* Combobox background color on 'hover' */
    --in-content-item-hover-text: var(--in-content-text-color) !important;                      /* Combobox text color on 'hover' */
    --in-content-item-selected: var(--general-color) !important;                                /* Combobox background color on 'hover' (arrow keys) */
    --in-content-item-selected-text:  var(--in-content-text-color) !important;                  /* Combobox text color on 'hover' (arrow keys) */

    --in-content-button-background: var(--in-content-border-color) !important;                  /* Button color */
    --in-content-button-background-hover: var(--button-active-bgcolor) !important;              /* Button color on 'hover' */
    --in-content-button-background-active: var(--general-color) !important;                     /* Button color on 'click' */

    --in-content-primary-button-background: var(--general-color) !important;                    /* Primary button color */
    --in-content-primary-button-background-hover: var(--button-hover-bgcolor) !important;       /* Primary button color on 'hover' */
    --in-content-primary-button-background-active: var(--button-active-bgcolor) !important;     /* Primary button color on 'active' */

    --link-color: var(--general-color) !important;                                              /* Links color */
    --link-color-hover: var(--blue) !important;                                                 /* Links color on 'hover' */
    --link-color-active: var(--purple) !important;                                              /* Links color on 'active' */
    --link-color-visited: var(--general-color) !important;                                      /* Links color on 'visited' */

    --background-color-information: light-dark(var(--button-bgcolor), var(--button-bgcolor)) !important;

    --gradiente-casual: linear-gradient(to right,                                               /* Personal gradient for 'about:preferences' */
        var(--in-content-box-border-color) 90%, transparent ) !important;
    
    --gradiente-casual-rtl: linear-gradient(to left,                                            /* Personal gradient for 'about:preferences RTL' */
        var(--in-content-box-border-color) 90%, transparent ) !important;
}

/* Various colors for about:addons and about:settings pages */

@media (prefers-color-scheme: dark) {
    :root {
        --contrast-color: #ffffff !important;                                                   /* Contrast background color */
        --border-contrast-color: #000000 !important;                                            /* Contrast border color */
        --in-content-page-background: #121018 !important;                                       /* Bakground color */

        --in-content-box-background: #15151e !important;                                        /* Color of textboxes and background of drop-down menus */
        --in-content-box-border-color: #272b37 !important;                                      /* Textbox border color */
    }
    
    /* Pop-up window background in 'settings' */
    .dialogBox { --in-content-page-background: #1a1a24 !important; }
}

@media (prefers-color-scheme: light) {
    :root{
        --contrast-color: #000000 !important;                                                   /* Contrast background color */
        --border-contrast-color: #ffffff !important;                                            /* Contrast border color */
        --in-content-page-background: #f9f9f9 !important;                                       /* Bakground color */

        --in-content-box-background: #f9f9fb !important;                                        /* Color of textboxes and background of drop-down menus */
        --in-content-box-border-color: #d4cfe7 !important;                                      /* Textbox border color */

        --in-content-button-text-color-hover: white !important;                                 /* Color of letters in buttons on 'hover' */
    }

    /* Pop-up window background in 'settings' */
    .dialogBox {--in-content-page-background: #f9f9f9 !important;}
}

/* _____________________________________ Various colors of the 'Add-ons' and 'Preferences' interface _____________________________________ */

@-moz-document url-prefix(about:preferences), url-prefix(about:addons), url-prefix(about:support), url-prefix(about:profiles) , url-prefix(about:debugging), url-prefix(about:welcome) {
        
    :root { --opaque: color-mix(in srgb, var(--in-content-page-background) 50%, transparent) !important; }

    /* Informative messages */

    .discopane-notice{
        --message-bar-background-color: var(--button-bgcolor) !important;
        --message-bar-border-color: var(--button-hover-bgcolor) !important;
        --message-bar-icon-color: var(--in-content-page-color) !important;
    }
    
    /* Button background when 'open' */
    
    button[aria-expanded="true"] {
        background-color: var(--general-color) !important;
    }
    
    /* button when 'open' - Menu background */
    
    panel-list {
        background: var(--in-content-button-background) !important;
    }
        
    /* Toggle button */

    .toggle-button[aria-pressed="true"]:enabled {
        background: var(--button-active-bgcolor) !important;
    }

    .toggle-button[aria-pressed="true"]:enabled:hover {
        background: var(--button-hover-bgcolor) !important;
    }

    /* Checkbox */

    .checkbox-check:not([checked="true"]) {
        appearance: none !important;
        background: var(--opaque) !important;
        border-radius: 2px !important;
    }

    checkbox:not(:hover) .checkbox-check:not([checked="true"]) { 
        border: 2px solid color-mix(in srgb, var(--gray) 20%, transparent) !important;
    }

    checkbox:hover .checkbox-check:not([checked="true"]) {
        border: 2px solid color-mix(in srgb, var(--gray) 60%, transparent) !important;
    }

    /* Category - left side */
        
    #categories {
        margin-inline-start: -10px !important;

        &> .category {
            background-color: transparent !important;
            color: color-mix(in srgb, var(--in-content-text-color)76%, transparent) !important;
            font-weight: 600 !important;
            font-size: 0.9em !important;
            text-decoration: 1px underline transparent !important;
            text-underline-offset: 4px !important;
            
            &:hover {
                background-color: transparent !important;
                color: var(--in-content-text-color) !important;
                text-decoration: 1px underline var(--in-content-text-color) !important;
                text-underline-offset: 4px !important; 
                border-color: transparent !important;
            }
        }
        
        &> .category[selected] {
            color: color-mix(in srgb, var(--general-color) 90%, var(--in-content-text-color)) !important;

            &:hover {
                color: var(--general-color) !important;
                text-decoration: 1px underline var(--general-color)!important;
            }
        }
    }

    /* Category sidebar footer */

    @media not (max-width: 830px) {
        .sidebar-footer-list {
            padding-inline: 25px !important;
            margin-inline: 0px !important;
        }
    }

    @media (max-width: 830px) {
        .sidebar-footer-list {
            margin-inline-start: 0px !important;
            padding-inline-start: 31px !important;
        }
    }

/* Rows and columns in 'about:support' */
        
    th { 
        background-color: var(--button-active-bgcolor) !important; 
        color: white !important; 
    }
    
    th.column{
        background-color: var(--in-content-box-info-background)  !important;
        color: var(--in-content-text-color) !important;
    }
        
    td { 
        border-color: var(--in-content-table-border-color) !important; 
    }        

    /* 'Separator line' gradient in 'settings' */

    .subcategory:not([hidden]) ~ .subcategory {
        border-image: linear-gradient(to right, var(--general-color), transparent) 1 !important; 
    }

    /* ___________ Background and border color of elements in about:addons */
    
    /* Addons */
    
    .addon.card {
        transition: outline 150ms, box-shadow 150ms !important;
    }
    
    addon-card:not([expanded]) > .addon.card:hover {
        & .addon-name-link {
            color: inherit !important;
            text-decoration: underline currentColor !important;
            text-underline-offset: 2px !important;
        }
    }

    .card[active="true"] {
        background-color: color-mix(in srgb, var(--in-content-box-background) 98%, var(--contrast-color)) !important;
        outline-color: transparent !important;

        &:hover {
            border-color: var(--general-color) !important;
            outline: 1px solid var(--general-color) !important;
        }
    }

    .card[active="false"]:hover {
        --border-color-card: color-mix(in srgb, currentColor 20%, transparent) !important;
    }

    addon-card[expanded] .addon.card {
        margin-top: 24px !important;
        outline-color: var(--general-color) !important;
    }
        
        /* Category Sidebar */
        
        .navigation, 
        #sidebar {
            box-shadow: inset -1px 0 0 0 var(--in-content-box-border-color), 
                1px 77px 17px var(--border-contrast-color) !important;
        }
        
        .navigation:dir(rtl), 
        #sidebar:dir(rtl) {
            box-shadow: inset 1px 0 0 0 var(--in-content-box-border-color), 
                1px 77px 17px var(--border-contrast-color) !important;
        }

    /* Search-box in 'about:preferences' */

    #policies-container, 
    #searchInput {
        border-radius: 16px !important;
        margin-block: 20px !important;
        margin-inline: 0px 120px !important;
        
        &:hover {
            border-color: var(--general-color) !important;
        }
    }
    
    /* Search box in 'about:addons' */
    
    search-addons > search-textbox {
        border-radius: 16px !important; 

        &:hover {
            border-color: var(--general-color) !important; 
        }
    }

    search-addons > search-textbox[focused] {
        border-color: var(--general-color) !important;
        outline: 2px solid var(--general-color) !important; 
    }

    #searchInput[focused]{ 
        outline: 2px solid var(--general-color) !important; 
    }
    
    /* Inside 'Privacy' Category */

    .privacy-detailedoption.selected .content-blocking-warning {  
        border-color: var(--general-color) !important;
    }

    .privacy-detailedoption.selected {
        background-color: color-mix(in srgb, var(--in-content-box-background) 96%, var(--contrast-color)) !important;
    }

    .privacy-detailedoption {
        backdrop-filter: var(--personal-blur) !important;
    }

    /* Various smooth transitions */

    button, menulist, treecol, .sidebar-footer-link {
        transition: background-color 0.2s ease !important;
    }

    search-textbox {
        transition: border 0.2s ease !important;
    }

    #categories > .category .category-name{
        transition: color 0.1s ease !important;
    }
        
    /* Transparency for various elements */

    .sticky-container, #sidebar, .navigation, .main-heading, .main-search {
        background-image: none !important;
        background-color: transparent !important;
    }
    
    /* _________ New layout of sticky and main content _________ */

    /* 'About:preferences' page */

    /* Remove unwanted margin from right section */
    .main-content {
        padding-inline: 0px !important;
    }

    .pane-container{
        width: max(100%, var(--page-main-content-width)) !important;
        display: grid !important;
        overflow-x: hidden !important;

        & #mainPrefPane {
            padding-top: 20px !important; 
            padding-inline-start: 60px !important;
            padding-inline-end: calc(100% - var(--page-main-content-width)) !important;
            overflow-x: hidden !important;
        }
    }
    /* 'About:addons' page */

    #content {
        max-height: 100vh;
        display: grid !important;
        grid-template-rows: auto auto 1fr;
        --in-content-page-background: transparent;
    }

    #main {
        overflow: auto;
        max-width: 100% !important;
        scrollbar-gutter: stable !important;

        & addon-card[expanded="true"],
        & addon-list,
        &>recommended-themes-section>recommended-addon-list,
        & recommended-extensions-section {
            --page-main-content-width: calc(100% + 28px + 4px) !important;
            display: block !important;
            max-width: calc(100% - var(--in-content-sidebar-width) - var(--main-margin-start, 0px)) !important;
            padding-inline-start: 4px !important;
        }

        & discovery-pane {
            --page-main-content-width: calc(100% + var(--main-margin-start) + 4px) !important;
            display: block !important;
            max-width: calc(100% - var(--in-content-sidebar-width) - var(--main-margin-start)) !important;
            padding-inline-start: 4px !important;
        }
    }

    /* Background without transparent browser */

    @media not -moz-pref("firefoxgx.main-image"), not -moz-pref("browser.tabs.allow_transparent_browser") {

        body,.sticky-container{
            --bg: linear-gradient(var(--opaque), var(--opaque)), var(--lwt-main-image);
            background-image: var(--bg) !important;
            background-size: cover !important;
            background-attachment: fixed !important;
        }

        body, .sticky-container {
            background-image: linear-gradient(var(--opaque), var(--opaque)),
                var(--bg) !important;
        }
    }
    
    /* Background When using transparent browser */
    
    @media -moz-pref("browser.tabs.allow_transparent_browser") {
        
        :root, 
        body,
        .sticky-container {  /* used for other 'about' pages */
            --opaque: transparent !important;
            background-image: none !important;
            background-color: transparent !important;
        }
    }
}

/* ________________________________________ only 'about:addons' page _________________________________________ */

@-moz-document url-prefix(about:addons) {

    /* Header */  

    .sticky-container {
        display: grid !important;
        grid-template-rows: 1 !important;
        grid-template-columns: auto  auto !important;
        box-shadow: 0 1px 0 0 var(--in-content-box-border-color), 
                17px 1px 17px var(--border-contrast-color) !important;

        /* Left part */            
        & .main-heading {
            grid-column: 1;
            grid-row: 1;
            padding-block: 25px !important;

            & .spacer {
                max-width: 20px !important;
            }
        }

        /* Right part */
        & .main-search {
            justify-content: center !important;
            display: grid !important;
            grid-column: 2;
            grid-row: 1;
            padding-block: 25px !important;

            & .search-label {
                display: none !important;
            }
        }
    }
    
    .sticky-container:dir(rtl) {
        box-shadow: 0 1px 0 0 var(--in-content-box-border-color), 
            -17px -1px 17px var(--border-contrast-color) !important;
    }

    /* Stycky head Style in small width resolution */

    @media (max-width: 830px) {

        /* Remove header label */
        .main-heading>.header-name {
            display: none !important;
        }
    }
}

/* ______________________________________ only 'about:preferences' page _______________________________________ */

@-moz-document url-prefix(about:preferences) {
    
    .sticky-container {
        box-shadow: 0 1px 0 0 var(--in-content-box-border-color), 
            -17px 1px 27px var(--border-contrast-color) !important;
    }

    .sticky-container:dir(rtl) {
        box-shadow: 0 1px 0 0 var(--in-content-box-border-color), 
            17px 1px 27px var(--border-contrast-color) !important;
    }

    @media not -moz-pref("firefoxgx.main-image") {

        #mainPrefPane{
            padding-top: 20px !important; 
            width: 100% !important; 
        }

        /*
        .pane-container {
            margin-inline-start: 50px !important; 
            margin-inline-end: 50px !important;
        }/**/

        .sticky-container {
            width: 125% !important;
            margin-inline-start: -78px !important;
            border-block-end: 1px solid transparent !important;
            border-image: var(--gradiente-casual) 1 !important;
            box-shadow: -17px 1px 17px var(--border-contrast-color) !important;
        }
        
        .sticky-container:dir(rtl) {
            border-image: var(--gradiente-casual-rtl) 1 !important;
            box-shadow: 17px 1px 17px var(--border-contrast-color) !important;
        }
    }
}
