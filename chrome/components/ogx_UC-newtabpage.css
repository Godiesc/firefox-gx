/* Source file made available under Mozilla Public License v. 2.0 See the main repository for updates as well as full license text.
   https://github.com/Godiesc/firefox-gx */

/*@media (prefers-color-scheme: dark){:root{ scrollbar-color: #282736 #10111a !important; }}        /* Scroll bar color */
/*@media(prefers-color-scheme: light){:root{ scrollbar-color: #d8d9da #f4f2f7 !important; }}        /* Scroll bar color */
/**{ scrollbar-width: thin !important}*/                                                            /* Smaller Scroll bar */

@-moz-document url(chrome://browser/content/browser.xul), url(about:newtab), url(about:home), url(about:privatebrowsing) {
    
    body {
    /*--newtab-search-icon: url(chrome://global/skin/icons/search-glass.svg) !important;            /* Image in the newtab searchbox */
    --newtab-background-color-secondary: transparent !important;                                    /* Background color of pinned sites and search box */
    --newtab-element-hover-color: var(--button-active-bgcolor) !important;                          /* Background color when clicking on the 3 dot menu icon */

    --newtab-element-secondary-hover-color: linear-gradient(to right,                               /* color when 'hover' on menu items three dots */
      var(--button-hover-bgcolor) 49%, transparent) !important;

    --newtab-element-secondary-active-color: linear-gradient(to right,                              /* Color clic en items del menÃº de 3 puntos */
      var(--button-active-bgcolor) 69%, transparent) !important;

    --newtab-border-color: color-mix(in srgb, var(--newtab-background-color) 92%,                   /* 3-point menu and input-box border color when editing a site*/
        var(--newtab-wordmark-color)) !important;
        
    --newtab-primary-action-background: var(--button-active-bgcolor) !important;                    /* Colors for 'Save' buttons and radiobuttons */
        
    --newtab-primary-element-text-color: var(--newtab-text-primary-color) !important;               /* check-box color */
        
    --newtab-element-secondary-color: color-mix( in srgb,                                           /* Color of inactive elements */
      var(--newtab-background-color) 85%, var(--newtab-text-primary-color) ) !important;
        
    --newtab-overlay-color: color-mix(in srgb, var(--contrast-color) 46%, transparent) !important;  /* Big background when editing a site, semi-transparent */
    }
    
    @media (prefers-color-scheme: dark){
        
        body {
            --contrast-color: black !important;                                                     /* Personal background color for contrast */
            --border-contrast-color: #09080d !important;                                            /* Personal border color for contrast */
            --arrowpanel-background: #1c1726 !important;                                            /* Background color for 3 dot menu */
        }}
    
    @media (prefers-color-scheme: light){
        
        body{
            --contrast-color: white !important;                                                     /* Personal background color for contrast */
            --border-contrast-color: #acacac50 !important;                                          /* Personal border color for contrast */
            --arrowpanel-background : #f9f9f9 !important;                                           /* Background color for 3 dot menu */
        }}
    
/* _______________________________________________________ Wallpapers _______________________________________________________ */
    
    @media not -moz-pref("firefoxgx.main-image") {

        /* Dark 1 - Fuchsia */
        #dark-sky,
        body[style*="e94b1e49-c518-40d6-98e3-dffab6cc370d.avif"],
        body[style*="e94b1e49-c518-40d6-98e3-dffab6cc370d.avif"] #photographs{
            background-image: var(--wallpaper-dark1) !important;
        }

        /* Dark 2 - Ultraviolet */
        #dark-mountain,
        body[style*="af6073d2-cbb2-4e28-b642-3327d14808b2.avif"],
        body[style*="af6073d2-cbb2-4e28-b642-3327d14808b2.avif"] #photographs{
            background-image: var(--wallpaper-dark2) !important;
        }

        /* Dark 3 - Blue */
        #dark-panda,
        body[style*="6b8eb3cf-f232-4c7b-a179-afd174555134.avif"],
        body[style*="6b8eb3cf-f232-4c7b-a179-afd174555134.avif"] #photographs{
            background-image: var(--wallpaper-dark3) !important;
        }
        
        /* Dark 4 - Green */
        #dark-fox-anniversary,
        body[style*='d8b71c77-9985-41d2-b98e-51bebc60e595.avif'],
        body[style*="d8b71c77-9985-41d2-b98e-51bebc60e595.avif"] #photographs{
            background-image: var(--wallpaper-dark4) !important;
        }

        /* Dark 5 - Swamp */
        #dark-landscape,
        body[style*='10e23599-85bc-4660-ae06-7a67befbbcf9.avif'],
        body[style*="10e23599-85bc-4660-ae06-7a67befbbcf9.avif"] #photographs{
            background-image: var(--wallpaper-dark5) !important;
        }

        /* Dark 6 - Gray */
        #dark-beach,
        body[style*='966b18ad-3733-41c4-92f6-c89cdf1381d0.avif'],
        body[style*="966b18ad-3733-41c4-92f6-c89cdf1381d0.avif"] #photographs{
            background-image: var(--wallpaper-dark6) !important;
        }

        /* Light 1 - Fuchsia */
        #light-panda,
        body[style*='dfd3762e-f77d-4b6e-ac75-32eb2549ef40.avif'],
        body[style*="dfd3762e-f77d-4b6e-ac75-32eb2549ef40.avif"] #photographs{
            background-image: var(--wallpaper-light1) !important;
        }

        /* Light 2 - Ultraviolet */
        #light-landscape,
        body[style*='d9289c5b-8c78-4b27-b5d8-afe7285ce7d1.avif'],
        body[style*="d9289c5b-8c78-4b27-b5d8-afe7285ce7d1.avif"] #photographs{
            background-image: var(--wallpaper-light2) !important;
        }

        /* Light 3 - BLue */
        #light-mountain,
        body[style*='5344443f-f427-4029-bc6b-68bc22f83355.avif'],
        body[style*="5344443f-f427-4029-bc6b-68bc22f83355.avif"] #photographs{
            background-image: var(--wallpaper-light3) !important;
        }

        /* Light 4 - Rose */
        #light-sky,
        body[style*='45ecab20-ffb9-47b4-94ff-07a5f8b9f53f.avif'],
        body[style*="45ecab20-ffb9-47b4-94ff-07a5f8b9f53f.avif"] #photographs{
            background-image: var(--wallpaper-light4) !important;
        }

        /* Light 5 - Lightgreen */
        #light-beach,
        body[style*='56a7f3ae-70cc-45f2-82ec-1d39acdd3b8d.avif'],
        body[style*="56a7f3ae-70cc-45f2-82ec-1d39acdd3b8d.avif"] #photographs{
            background-image: var(--wallpaper-light5) !important;
        }
        
        /* Light 6 - Orange */
        #light-fox-anniversary,
        body[style*='a5a041de-9275-4eb5-8f21-a0171c82d388.avif'],
        body[style*="a5a041de-9275-4eb5-8f21-a0171c82d388.avif"] #photographs{
            background-image: var(--wallpaper-light6) !important;
        }
    }
    
    /* Accent color for each wallpaper */
    
    :root:has(body[style*='e94b1e49-c518-40d6-98e3-dffab6cc370d.avif']){
        --general-color: var(--general-color-dark1) !important;    }

    :root:has(body[style*='af6073d2-cbb2-4e28-b642-3327d14808b2.avif']){
        --general-color: var(--general-color-dark2) !important;    }
    
    :root:has(body[style*='6b8eb3cf-f232-4c7b-a179-afd174555134.avif']){
        --general-color: var(--general-color-dark3) !important;    }
    
    :root:has(body[style*='d8b71c77-9985-41d2-b98e-51bebc60e595.avif']){
        --general-color: var(--general-color-dark4) !important;    }

    :root:has(body[style*='10e23599-85bc-4660-ae06-7a67befbbcf9.avif']){
        --general-color: var(--general-color-dark5) !important;    }

    :root:has(body[style*='966b18ad-3733-41c4-92f6-c89cdf1381d0.avif']){
        --general-color: var(--general-color-dark6) !important;    }

    :root:has(body[style*='dfd3762e-f77d-4b6e-ac75-32eb2549ef40.avif']){
        --general-color: var(--general-color-light1) !important;   }

    :root:has(body[style*='d9289c5b-8c78-4b27-b5d8-afe7285ce7d1.avif']){
        --general-color: var(--general-color-light2) !important;   }

    :root:has(body[style*='5344443f-f427-4029-bc6b-68bc22f83355.avif']){
        --general-color: var(--general-color-light3) !important;   }

    :root:has(body[style*='45ecab20-ffb9-47b4-94ff-07a5f8b9f53f.avif']){
        --general-color: var(--general-color-light4) !important;   }

    :root:has(body[style*='56a7f3ae-70cc-45f2-82ec-1d39acdd3b8d.avif']){
        --general-color: var(--general-color-light5) !important;   }
    
    :root:has(body[style*='a5a041de-9275-4eb5-8f21-a0171c82d388.avif']){
        --general-color: var(--general-color-light6) !important;   }
    
    /* Accent color indicator over each wallpaper */
    
    .wallpaper-input[aria-checked]::after {
        position: fixed;
        content: "";
        width: 10px;
        height: 10px;
        background-color: var(--general-color);
        border-radius: 2px;
        margin-block: 5px;
        margin-inline: 5px;
        outline: 1px solid #80808080;
        outline-offset: 1px;
    }
    
    /* rearrangement of wallpapers */
    
    #dark-sky {             order: 1 !important;   --general-color: var(--general-color-dark1) !important; }
    #dark-mountain {        order: 2 !important;   --general-color: var(--general-color-dark2) !important; }
    #dark-panda {           order: 3 !important;   --general-color: var(--general-color-dark3) !important; }
    #dark-fox-anniversary { order: 4 !important;   --general-color: var(--general-color-dark4) !important; }
    #dark-landscape {       order: 5 !important;   --general-color: var(--general-color-dark5) !important; }
    #dark-beach {           order: 6 !important;   --general-color: var(--general-color-dark6) !important; }
    #light-panda {          order: 7 !important;   --general-color: var(--general-color-light1) !important; }
    #light-landscape {      order: 8 !important;   --general-color: var(--general-color-light2) !important; }
    #light-mountain {       order: 9 !important;   --general-color: var(--general-color-light3) !important; }
    #light-sky {            order: 10 !important;  --general-color: var(--general-color-light4) !important; }
    #light-beach {          order: 11 !important;  --general-color: var(--general-color-light5) !important; }
    #light-fox-anniversary{ order: 12 !important;  --general-color: var(--general-color-light6) !important; }
        
    /* Border color when 'hover' over wallpapers */

    .wallpaper-list .wallpaper-input:not(:checked):hover {
        outline: 1px solid #80808080 !important;
    }
    
    /* Border color when 'hover' over selected wallpaper */
    
    .wallpaper-list .wallpaper-input {
        padding: 1px !important;
    }

    .wallpaper-list .wallpaper-input:checked:hover {
        filter: none !important;
        outline-color: var(--button-active-bgcolor) !important;
    }
    
    /* Remove credits from the image used as wallpaper */

    .wallpaper-attribution { display: none !important; }
    
    /* Wallpaper default brightness */

    body::before {
        position: fixed;
        content: "";
        top: 0;
        left: 0;
        width: 100vw;
        height: 100vh;
        background-color: color-mix(in srgb, var(--newtab-background-color), transparent var(--brightness-wallpaper));
        pointer-events: none;
    }
    
/* _____________________________________________________ Logo & Wordmark ____________________________________________________ */
    
    .layout-variant-b.has-recommended-stories .logo {
        background-size: 52px !important;
    }
    
    .logo{
        background: url("../icons/foxmenu.svg") no-repeat center !important;
        background-size: 64px !important;
        -moz-context-properties: fill !important;
        fill: var(--general-color) !important;
        transform: scale(0.8) !important;
        }

    .wordmark {
        fill: var(--general-color) !important;
        }

    .logo-and-wordmark {
        Opacity: var(--logo-wordmark-visibility) !important;
        display: var(--logo-wordmark-display) !important;
        margin-bottom: 10px !important;
        }

    .promo-cta .button {
        color: #cacaca !important; 
        }

    main {
        justify-content: var(--newtab-pinnedsites-position-top, center) !important;
        }
    
    /* 'Wordmark,logo' and 'search box' side by side */

    @media screen and (min-width: 1000px){

        .logo-and-wordmark { 
            margin-inline: 30px !important;  
        }
        
        .search-wrapper {
            display: var(--orientation-display) !important;
        }
        
        .search-inner-wrapper{
            display: var(--searchbar-display) !important;
            height: 52px !important;
            margin-top: 0px !important;
        }
    }
    
/* __________________________________________________________________________________________________________________________ */
    
    /* Remove scrollbar */

    *{scrollbar-width: none !important }

    /* Colors when editing a pinned site */

    .modal {
        background: var(--newtab-overlay-color) !important;
        border-image: var(--panel-separator-zap-gradient4) 1 !important;
        border-radius: 0 !important; 
        }

    .modalOverlayOuter {
        backdrop-filter: blur(26px); 
        }

    .topsite-form .actions {
        border-image: var(--panel-separator-zap-gradient4) 1 !important;
        }

    input[type="text"], input[type="search"] {
        border-radius: 4px !important; 
        }

    input:focus-visible, input:focus-visible {
        outline: 2px solid var(--general-color) !important;
        outline-offset: -1px !important;
        border-color: var(--general-color) !important;
        }
    
    /* Styles for the 'Save' button */

    .actions button:not(.cancel), .actions button:focus:not(.cancel) {
        color: var(--newtab-wordmark-color) !important;
        border-color: transparent !important;
        }
    
    .actions button:hover:not(.dismiss) {
        background-color: var(--button-hover-bgcolor) !important; 
        color: var(--newtab-wordmark-color) !important; 
        box-shadow:none !important; 
        }

    /* Styles for the 'Cancel' button */

    .actions button:is(.cancel, [data-l10n-id="newtab-topsites-cancel-button"]){
        background-color: var(--newtab-element-secondary-color) !important; 
        border-color: color-mix(in srgb, var(--newtab-element-secondary-color) 90%, var(--newtab-text-primary-color)) !important; /**/
    }
    
    .actions button:is(.cancel):hover {
        background-color: #da3633aa !important;
        color: var(--newtab-wordmark-color) !important;
        border-color: transparent !important;
    }

    /* 'Customize' button */

    .icon.icon-settings {
        background-image: url("../icons/edit.svg") !important; 
        opacity: 0.5 !important;
        transition: none !important;
    }
    
    .personalize-button:is(:hover, :active) {
        background-color: transparent !important;
        opacity: 1 !important;
    }

    /* Colors of the 'Close' button */

    .close-button {
        background-color: var(--newtab-element-secondary-color) !important;
        /*color: var(--newtab-wordmark-color)  !important;/**/
        border-radius: 4px !important;
        border-color: transparent !important;
    }
    
    .close-button:hover{
        background-color: var(--button-hover-bgcolor) !important;
    }
    
    .close-button-wrapper {
        position: static !important;
    }
    
    /* Weather */
    
    .weatherInfoLink, .weatherButtonContextMenuWrapper {
        background-color: light-dark(var(--newtab-pinnedsites-background), var(--newtab-pinnedsites-background)) !important;
        backdrop-filter: var(--personal-blur) !important;
    }
    
    .weatherCard:hover {
        background-color: light-dark(var(--newtab-pinnedsites-background), var(--newtab-pinnedsites-background)) !important;
    }
    
    .weatherCard :is(.weatherInfoLink, .weatherButtonContextMenuWrapper):hover {
        background-color: light-dark(var(--newtab-pinnedsites-background), var(--newtab-pinnedsites-background)) !important;
        backdrop-filter: var(--personal-blur) !important;
        outline: 1px solid var(--button-hover-bgcolor) !important;
        box-shadow: inset 0 0 0 1px var(--button-bgcolor) !important;
    }
    
    .weatherInfoLink, .weatherButtonContextMenuWrapper{
        outline: 1px solid #50505030 !important;
        outline-offset: -1px !important;
    }
    
    .weatherButtonContextMenuWrapper{
        margin-inline-start: -1px !important;
    }
    
    .weatherButtonContextMenuWrapper::after {
        background-color: transparent !important;
    }
    
    :root:has(.weatherInfoLink:hover) .weatherButtonContextMenuWrapper::after {
        background-color: var(--button-hover-bgcolor) !important;
        top: 0px !important;
        height: 100% !important;
    }
    
/* _______________________________ Colors of the sliding sidebar used to customize the NewTab _______________________________ */
       
    /* Shadow */
    
    .customize-menu.customize-animate-enter-done, .customize-menu.customize-animate-enter-active,
    .customize-menu.customize-animate-exit, .customize-menu.customize-animate-exit-done{
        box-shadow: -1px 0 #50505030, 0px 0px 20px rgb(1 1 1 / 16%), 0px 0px 10px rgb(0 0 0 / 93%) !important;
        transition-duration: 200ms !important;
    }
    
    /* Background */
    
    .customize-menu {
        background-color: color-mix(in srgb, var(--newtab-background-color) ,var(--newtab-overlay-color)) !important;
        /*color: var(--newtab-wordmark-color) !important;/**/
        backdrop-filter: var(--personal-blur); 
    }
    
    /* Combobox */
    
    .home-section .section .selector {
        background-color: var(--newtab-element-secondary-color) !important;
        border-color: transparent !important;
        border-radius: 4px !important;
        box-shadow: none !important;
    }

    .home-section .section .selector:hover {
        background-color: var(--button-active-bgcolor) !important;
        border-color: var(--button-hover-bgcolor) !important;
        color: white !important;
    }
    
    /* Checkbox color for 'sponsored sites' */

    .sponsored-checkbox:is(:checked):hover, .sponsored-checkbox:not(:checked):hover{ 
        background-color: var(--button-hover-bgcolor) !important;
    }

    /* Radiobutton color into "Customize" */

    .toggle-button[aria-pressed="true"] {
        background: var(--button-active-bgcolor) !important;
    }
    
    .toggle-button[aria-pressed="false"] {
        opacity: 0.7 !important;
    }

    .toggle-button[aria-pressed="true"]:enabled:hover {
        background: var(--button-hover-bgcolor) !important;
    }

    .toggle-button:enabled:hover {
        opacity: 1 !important;
    }
    
    /* Separador*/
    
    .home-section .divider { 
        border-image: var(--panel-separator-zap-gradient4) 1 !important;
    }
    
    /* Background blur when open a wallpaper category */
    
    .customize-menu:has(.category.wallpaper-list) {
        & .wallpapers-section ~ *,
        & .wallpapers-section .category-header,
        & .wallpapers-section .category-list,
        & .close-button-wrapper {
            opacity: 0  !important;
            transition: opacity 0.2s ease;
        }
    }

    .customize-menu:not(:has(.category.wallpaper-list)) {
        & .wallpapers-section ~ *,
        & .wallpapers-section .category-header,
        & .wallpapers-section .category-list,
        & .close-button-wrapper{
            opacity: 1 !important;
            transition: opacity 0.3s ease;
        }
    }
    
/* ______________________________________________________ Search box _______________________________________________________ */

    /* Remove arrow */
    .search-wrapper .search-button { display: none !important; }

    /* General background */

    .search-wrapper{ 
        border-radius: 0px !important;
        outline-color: transparent !important;
        box-shadow: none !important;
    }

    .search-inner-wrapper{
        opacity: var(--searchbar-on-off, 1) !important;
        display: var(--searchbar-display, flex) !important;
        box-shadow: 0 2px var(--button-bgcolor) !important;
    }
    
    /* Font color */
    
    .search-wrapper input {
        color: var(--newtab-contextual-text-primary-color) !important;
        text-shadow: 0px 0px 4px var(--contrast-color) !important;
    }
    
    /* Logo and Search when it get sticky position */
    
    @media (height > 700px) {
        body:not(.inline-onboarding) .fixed-search .search-wrapper {
            background-color: color-mix(in srgb, var(--newtab-background-color) 90%, transparent) !important;
            backdrop-filter: var(--personal-blur) !important;
        }
    }
    
    /* Styles for the classic search box */
    
    @media not -moz-pref("browser.newtabpage.activity-stream.improvesearch.handoffToAwesomebar") {
        
        .search-inner-wrapper:not(:focus) input, .search-wrapper:not(:active) input:focus {
            box-shadow: none !important;
            outline-color: transparent !important;
        }

        .search-wrapper .search-inner-wrapper:active input, .search-wrapper input:focus {
            outline-color: transparent !important;
            border-color: transparent !important;
        }

        browser[primary="true"][tabDialogShowing="true"],
        #main-window[window-modal-open="true"] > body > #browser {
            filter: blur(10px)
        }
        
        /* Searchbox focus Animation line - included code for RTL language */
        
        :root:has(#newtab-search-text) .search-inner-wrapper:after,
        :root:has(#newtab-search-text) .search-inner-wrapper:dir(rtl):after {
            content: '' !important; display: flex !important; position: absolute !important;
            width: 100% !important;
            height: 2px !important;
            top: 50px !important;
            box-shadow: 0 2px 0 0 var(--general-color) !important;
            clip-path: xywh(0 0 0% calc(100% + 2px)) !important;
            transition: clip-path 400ms ease !important;
        }
        
        :root:has(#newtab-search-text[Keepfocus="true"]) .search-inner-wrapper:after,
        :root:has(#newtab-search-text[Keepfocus="true"]) .search-inner-wrapper:dir(rtl):after {
            clip-path: xywh(0 0 100% calc(100% + 2px)) !important;
            transition: clip-path 400ms ease !important;
        }
        
        :root:has(#newtab-search-text) .search-inner-wrapper:dir(rtl):after  {
            clip-path: xywh(100% 100% 0% calc(100% + 2px)) !important;
        }
    }
    
    /* Styles for the improved search box */
    
    @media -moz-pref("browser.newtabpage.activity-stream.improvesearch.handoffToAwesomebar") {

        /* Transparent border when 'focus' */    
        .search-wrapper.fake-focus .search-inner-wrapper .search-handoff-button {
            box-shadow: none !important;
            border-color: transparent !important;
            transition-duration: 0ms !important;
        }

        /* inputbox animation when 'focus' */

        .search-wrapper .fake-editable,
        .search-wrapper:dir(rtl) .fake-editable {
            border-color: transparent !important;
            border-radius: 0px !important;
            box-shadow: 0 2px 0 0 var(--general-color) !important;
            opacity: 1 !important;
            clip-path: xywh(0 0 0% calc(100% + 2px)) !important;
            transition: clip-path 400ms ease !important;
        }

        .search-wrapper.fake-focus .fake-editable,
        .search-wrapper.fake-focus:dir(rtl) .fake-editable {
            border-color: transparent !important;
            border-radius: 0px !important;
            box-shadow: 0 2px 0 0 var(--general-color) !important;
            opacity: 1 !important;
            clip-path: xywh(0 0 100% calc(100% + 2px)) !important;
            transition: clip-path 400ms ease !important;
        }
        
        .search-wrapper:dir(rtl) .fake-editable  {
            clip-path: xywh(100% 100% 10% calc(100% + 2px)) !important;
        }
        
        .search-wrapper .search-inner-wrapper:active input, .search-wrapper input:focus {
            outline: none !important;
        }
    }

/* _____________________________________________________ Pinned sites ______________________________________________________ */
    
    /* Margin when 'News' are actived */
    
    .has-weather.has-search.layout-variant-b.has-recommended-stories.has-sections-grid {
        .top-sites-list {
            margin-block-start: 40px !important;
        }
    }
    
    .top-sites-list {
        
        /* Pinned Site Colors (Small Background) */
        .top-site-outer .tile {
            border-radius: 4px !important;
            width: 100px !important;
            height: 100px !important;
            align-items: start !important;
            margin-inline: 0px !important;
            padding-top: 18px !important;
            box-shadow: 0 0 0 1px #50505030 !important;
            outline-color: transparent !important; /* Used for smooth transition */
            background-image: linear-gradient(0deg, color-mix(in srgb, var(--general-color)4%, var(--newtab-pinnedsites-background)) , rgba(0,255,0,0) 64.71%),
                linear-gradient(190deg, var(--newtab-pinnedsites-background), var(--newtab-pinnedsites-background) 99.71%) !important;/**/
            backdrop-filter: var(--personal-blur) !important;
        }

        /* Pin icon removed */
        .title.has-icon.pinned .icon.icon-pin-small { 
            display: none !important; 
        }
        
        /* Label - pinned site */
        .title {
            padding-block: 0px !important;
        }
        
        .title-label  {
            padding: 0px !important;
            padding-inline: 4px !important;
            font-size: 14px !important;
            margin-top: -30px !important;
        }

        /* Title label just in one line */
        
        .top-site-outer:hover .title:not(.sponsored) .title-label {
            -webkit-line-clamp: unset !important;
        }
        
        .top-site-outer:is(:hover,:focus-within) span[dir="auto"] {
            text-wrap-mode: nowrap !important;
        }
        
        /* Remove style when on 'hover' over pinned sites (larger background) */

        /* remove unwanted padding of elements */
        .top-site-outer .top-site-inner > a {
            padding: 0 !important;
        }

        /* size and background color */
        .top-site-outer {
            margin-inline: 8px !important;
            margin-block: 0px !important;
            border-radius: 0px !important;
            background-color: transparent !important;
        }

        /* Styes when on 'hover' over 'Pinned sites' and 'Recent Activity' */
        .top-site-outer:hover .tile, .card-outer:hover .card{
            outline: 1px solid var(--button-hover-bgcolor) !important;
            transition: outline 0.1s ease-in-out !important;
        }
    }
    
    /* Styles when clicking on a pinned site and moving the mouse away */
    .top-site-outer:is(:focus-within) .tile, 
    .card-outer:is(.active,:focus-within) .card{
        outline: 1px solid var(--button-active-bgcolor) !important;
        box-shadow: 0 2px 6px rgba(0, 0, 0, 0.15) !important;
    }
    
/* ____________________________________________________ Recent Activity ____________________________________________________ */
    
    .card-outer .card {
        background: linear-gradient(0deg, color-mix(in srgb, var(--general-color)6%, var(--newtab-pinnedsites-background)) , rgba(0,255,0,0) 24.71%),
                    linear-gradient(190deg, var(--newtab-pinnedsites-background), var(--newtab-pinnedsites-background) 99.71%) !important;
        backdrop-filter: var(--personal-blur) !important;
        border-radius: 6px !important;
        border: 1px solid #50505030 !important;
        outline-color: transparent !important;
        outline-offset: -1px !important;
    }
    
    /* Site preview image roundness */
    .card-preview-image-outer { 
        border-radius: 6px 6px 0 0 !important; 
    }

    /* Underline on 'hover' */
    .card-outer:is(:hover, :focus, :active, :focus-within, .active):not(.placeholder) .card-title {
        --newtab-primary-action-background: var(--newtab-text-primary-color) !important;
        text-decoration: underline !important;
    }
    
    .compact-cards .card-outer .card-context>.card-context-icon {
        fill: var(--newtab-wordmark-color) !important;
        opacity: 0.7 !important;
    }
    
    /* _______ News in new tab page US */
    
    :root {
        /* for radius */
        --border-radius-large: 4px !important;
        --border-radius-medium: 4px !important;
    }
    
    .ds-section-grid.ds-card-grid {
        /*backdrop-filter: var(--personal-blur) !important;
        background-color: var(--newtab-pinnedsites-background) !important;
        outline: 1px solid #50505050 !important;/**/
        margin: 6px 0px 6px -6px !important;
        padding: 6px !important;
        border-radius: 18px !important;
    }
    
    .ds-card {
        backdrop-filter: var(--personal-blur) !important;
        background-color: var(--newtab-pinnedsites-background) !important;
        outline: 1px solid #50505050 !important;
        border-radius: 4px !important;
    }
    
/* ________________________ Font color when using a light wallpaper ________________________ */

    .lightWallpaper .top-site-outer{
        --contrast-color: white !important;
    }
    
    .darkWallpaper .top-site-outer{
        --contrast-color: black !important;
    }

    /* Recent Activity text shadow */
    .ds-highlights .section .section-list .card-outer .card-host-name,
    .card-outer:not(.placeholder) .card-title {
        text-shadow: 0px 0px 4px var(--contrast-color) !important;
    }
    
    .lightWallpaper :is(
    .card-host-name, .card-outer:not(.placeholder) .card-title, .card-outer .icon,    /* 'Pinned' label */
    .top-site-outer:is(:hover, :active, .active) .title span,                         /* 'Activity' label */
    .ds-card .meta .clamp ) {                                                        /* 'News' */
        color: black !important;
        --contrast-color: white !important;
    }
    
    .darkWallpaper :is(
    .card-host-name, .card-outer:not(.placeholder) .card-title, .card-outer .icon,    /* 'Pinned' label */
    .top-site-outer:is(:hover, :active, .active) .title span,                         /* 'Activity' label */
    .ds-card .meta .clamp ) {                                                        /* 'News' */
        color: white !important;
        --contrast-color: black !important;
    }
    
    /* Scheme light */                    
    .lightWallpaper :is(
    .weatherCard, .personalize-button,                                                                  /* weather - personalize-button */
    .search-inner-wrapper input, .search-wrapper input, #newtab-search-text[Keepfocus="true"] ) {       /* Search-box */
        color-scheme: light !important;
        --contrast-color: white !important;
    }
    
    /* scheme dark */
    .darkWallpaper :is(
    .weatherCard, .personalize-button,                                                                  /* weather - personalize-button */
    .search-inner-wrapper input, .search-wrapper input, #newtab-search-text[Keepfocus="true"] ) {       /* Search-box */
        color-scheme: dark !important;
        --contrast-color: black !important;
    }
    
/* ___________________________________________ 3 dot contextual menu ___________________________________________ */

    /* 3 dot contextual menu */

    .context-menu {
        background-color: var(--arrowpanel-background) !important; 
        border-radius: 0px !important;
        top: 0px !important;
        box-shadow: 0px 0px 0 1px var(--contrast-color) !important;
        border: 1px solid var(--arrowpanel-background) !important;
        border-image: var(--panel-separator-zap-gradient4) 1 !important;
    }

    /* Separator line */

    .context-menu .separator{
        margin-block: 2px !important;
        margin-inline: 6px !important;
        width: -moz-available !important;
        border-image: var(--panel-separator-zap-gradient4) 1 !important;
    }
    
    /* 3 dot icon pinned sites*/
    .top-site-outer .context-menu-button {
        background-image: url("../icons/more.svg") !important;
        background-color: transparent !important;
        border-radius: 0px 4px !important;
        margin-inline-end: -6px !important;
        margin-block-start: 19px !important;
        margin-inline-start: -10px !important;
        transition: opacity 200ms;
    }
    
    /* 3 dot icon recent activity */    
    .card-outer .context-menu-button{
        background-image: url("../icons/more.svg") !important;
        background-color: var(--button-bgcolor) !important;
        border-radius: 50% !important;
        border-color: #50505030 !important;
        transition-duration: 0.2s !important;
        transition-delay: 0ms !important;
    }
    
    /*  3 dot icon on 'hover' and 'click' */
    .card-outer .context-menu-button:is(:hover,[open], :active),  
    .card-outer.active .context-menu-button,
    .top-site-outer .context-menu-button:is(:hover, :focus) {
        background-color: var(--general-color) !important;
        transition: opacity 200ms;
    }
    
    /* Background of popup message when trying to delete a pinned site */

    .modal {
        backdrop-filter: var(--personal-blur) !important;
        outline: 1px solid var(--contrast-color) !important;
    }
    
    /* ________________________________________________ For Main-image configuration ___________________________________________ */
    
    @media -moz-pref("firefoxgx.main-image") {
        
        body {
            background-image: none !important;
            background-color: transparent !important;
            
            /* Remove unwanted brightness */
            &::before {
                display: none !important;
            }
        }
        
        .customize-menu {
            background-image: url("../icons/urlbar-noise-dark.png") !important;
        }
        
        /* When editing a pinned site */
        
        .modalOverlayOuter {
            --newtab-button-static-hover-background: light-dark(#E0E0E6, #101019e0) !important;
            background-image: url("../icons/urlbar-noise-dark.png") !important;
            background-color: var(--newtab-button-static-hover-background) !important;
        }
        
        /* General -Recent activity- */

        .card .card-details {
            position: relative !important;
            z-index: 1 !important;
        }

        .card .card-context {
            position: fixed !important;
        }
    }
}

/*  _____________ Background and font color when selecting text on websites */

::selection {
    color: black !important;
    box-shadow: none !important;
    text-shadow: none !important;
    background: var(--selected-text-background) !important;
}

/* ________________________________________________ Error Page Loading Page ________________________________________________ */

@-moz-document url('about:config'),  url(about:privatebrowsing), regexp("^about:(neterror|certerror).*") , url('about:firefoxview') {

    .button[autofocus], .button[type="submit"], .button[default], button.primary:not(:hover) {
        background-color: var(--button-active-bgcolor) !important;
        color: white !important;
        border-color: transparent !important;
    }

    button.primary:hover{
        background-color: var(--general-color) !important;
        color: white !important; 
    }
}

/* ___________________________________________________ Private Browsing ____________________________________________________ */

@-moz-document url(about:privatebrowsing) {
    
    :root{ 
        --general-color: var(--purple) !important; 
    }
    
    body {
        --newtab-search-icon: url("chrome://global/skin/icons/indicator-private-browsing.svg") !important;
        background: var(--lwt-private-image) no-repeat right top fixed !important;
        background-size: cover !important;
        background-position-y: var(--background-align-y) !important;
        backdrop-filter: var(--brightness-wallpaper) !important;
    }

    .promo.below-search, .info {
        background-color: var(--newtab-pinnedsites-background) !important;
        backdrop-filter: var(--personal-blur) !important;
        outline: 1px solid #50505030 !important;
    }

    .search-handoff-button {
        background-color: transparent !important;
        border: transparent !important;
        box-shadow: none !important;
    }

    .fake-textbox, .fake-editable {
        color: var(--newtab-wordmark-color) !important;
    }

    .fake-caret { 
        background-color: var(--in-content-icon-color) !important;
    }

    .search-inner-wrapper:not(:focus) {
        backdrop-filter: var(--personal-blur) !important;
    }

    .logo {
        background: url("chrome://global/skin/icons/indicator-private-browsing.svg") no-repeat !important;
        background-size: cover !important;
        height: 80px !important;
        width: 80px !important;
        Opacity: var(--logo-wordmark-visibility) !important;
        display: var(--logo-wordmark-display) !important;
    }

    .wordmark {
        background: url("../icons/firefox-wordmark-private.svg") no-repeat center center !important;
        Opacity: var(--logo-wordmark-visibility) !important;
        display: var(--logo-wordmark-display) !important;
    }
}

/* _______________________________________________________ Firefox View ____________________________________________________ */

@-moz-document regexp("^about:firefoxview.*") {
    
    :root{
        --fxview-primary-action-background: transparent !important;                     /* background color of the selected category */
        --fxview-element-background-hover: var(--button-hover-bgcolor) !important;      /* Context menu: color on 'hover' over items */
        --fxview-element-background-active: var(--button-active-bgcolor) !important;    /* Context menu: color on 'clic' over items */
        --fxview-border: var(--fxview-primary-action-background) !important;
        --fxview-background-color: transparent !important;
        --opaque: color-mix(in srgb, var(--in-content-page-background) 50%, transparent) !important;
    }
    
    @media (prefers-color-scheme: dark) {
        :host, :root {
            --border-contrast-color: black;
            --newtab-background-color: #14141d !important;
            --newtab-background-color-secondary: rgba(52, 55, 69, 0.7) !important;
            --newtab-primary-action-background: var(--general-color) !important;
            --in-content-primary-button-text-color: white !important;
            --in-content-primary-button-background: var(--general-color) !important;
            --in-content-primary-button-background-hover: var(--button-hover-bgcolor) !important;
            --in-content-primary-button-background-active: var(--button-active-bgcolor) !important;
        }
    }
    
    @media (prefers-color-scheme: light){
        :root{
            --border-contrast-color: white;
            --newtab-background-color: #efeff5 !important;
            --newtab-primary-action-background: var(--general-color) !important;
            --in-content-primary-button-text-color: white !important;
            --in-content-primary-button-background: var(--general-color) !important;
            --in-content-primary-button-background-hover: var(--button-hover-bgcolor) !important;
            --in-content-primary-button-background-active: var(--button-active-bgcolor) !important;
        }
    }
    
    body, .sticky-container{
        --bg: var(--lwt-main-image);
        background-image: linear-gradient(var(--opaque), var(--opaque)),
                          linear-gradient(var(--opaque), var(--opaque)), 
                          var(--bg) !important;
        background-repeat: repeat !important;
        background-size: cover !important;
        background-attachment: fixed !important;
        background-position-y: var(--background-align-y) !important;
        backdrop-filter: var(--brightness-wallpaper) !important;
    }
    
    .sticky-container{
        margin-block-end: 10px !important;
        box-shadow: 0 4px 10px var(--in-content-page-background) !important;
        clip-path: polygon(0 0, 100% 0, 100% calc(100% + 10px), 0 calc(100% + 10px));
    }
    
    button[selected] {
        transition-duration: 0ms !important;
    }
    
    .search-container input:is(:focus, :focus-visible){
        &:focus-visible {
            border-color: transparent !important;
            box-shadow: 0 0 0 2px var(--general-color) !important;
            outline: none !important;
        }}
    
/* Compatibility for aligning wallpaper when used with 'Main-image' config */
    
    @media -moz-pref("firefoxgx.main-image") {

        .sticky-container {
            background-image: none !important;
        }
        
        body {
            background: transparent !important;
            overflow-y: hidden !important;
        }
        
        .main-container {
            width: 100% !important;
        }
        
        #pages {
            padding: 0px !important;
        }
        
        named-deck>view-recentbrowsing>div {
            
            min-width: 100% !important;
            display: grid;
        }
        
        named-deck {
            width: 100% !important;
            display: grid;
        }
        
        .cards-container {
            height: 66vh !important;
            overflow: auto;
            scrollbar-gutter: stable !important;
            padding-inline: 42px 52px !important;
        }
        
        .sticky-container {
            margin-inline: 0px !important;
            padding-inline: 42px 52px !important;
        }
    }
}
